_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{F3j7:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/myrecipes",function(){return n("xcMo")}])},O2ls:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g})),n.d(t,"SignInUpContainer",(function(){return m}));var r=n("nKUr"),c=(n("g4pe"),n("q1tI")),i=n("20a2"),a=n("d5us"),s=n("Vvt1"),o=n.n(s),l=n("vRNQ"),d=n.n(l),u=n("7KBc"),j=n.n(u),b=o()((function(){return n.e(7).then(n.bind(null,"7vrA"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["7vrA"]},modules:["react-bootstrap/Container"]}}),h=o()((function(){return n.e(8).then(n.bind(null,"3Z9Z"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["3Z9Z"]},modules:["react-bootstrap/Row"]}}),f=o()((function(){return n.e(0).then(n.bind(null,"JI6e"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["JI6e"]},modules:["react-bootstrap/Col"]}}),p=o()((function(){return n.e(10).then(n.bind(null,"cWnB"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["cWnB"]},modules:["react-bootstrap/Button"]}});function O(){var e=Object(i.useRouter)(),t=Object(c.useState)({user:{},loggedIn:!1}),n=(t[0],t[1]);return Object(r.jsxs)(f,{className:"col-12 col-md-8 p-4 bg-light border-right rounded-left",children:[Object(r.jsx)("h2",{children:"Create your Account"}),Object(r.jsxs)("h3",{children:["Love Trader Joe's? Start favoriting recipes and populate your TJ's grocery list! ",Object(r.jsx)("i",{children:"Free forever!"})]}),Object(r.jsx)("form",{onSubmit:function(t){t.preventDefault();var r=new FormData(t.target);fetch("/api/users",{method:"POST",body:r}).then((function(t){alert("You created an account! Build your favorite recipes to easily view your grocery list!"),t.json().then((function(t){console.log(JSON.stringify(t[0].user)),console.log(t[0].user),localStorage.setItem("user",JSON.stringify(t[0].user)),localStorage.setItem("loggedIn",!0),n({loggedIn:!0,user:t[0].user}),e.back()}))}))},children:Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[Object(r.jsx)("label",{htmlFor:"fname",children:"First Name:"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"text",name:"fname",id:"fname",placeholder:"Joe",required:!0,minLength:"2",maxLength:"40",autoFocus:!0})]}),Object(r.jsxs)("td",{children:[Object(r.jsx)("label",{htmlFor:"lname",children:"Last Name:"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"text",name:"lname",id:"lname",placeholder:"Coulombe",minLength:"2",maxLength:"40",required:!0})]})]}),Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[Object(r.jsx)("label",{htmlFor:"phone",children:"10-digit Phone Number:"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"tel",name:"phone",id:"phone",placeholder:"4158631292",pattern:"[0-9]{10}",maxLength:"10",required:!0})]}),Object(r.jsxs)("td",{children:[Object(r.jsx)("label",{htmlFor:"fname",children:"Password:"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",required:!0})]})]}),Object(r.jsx)("tr",{children:Object(r.jsx)("td",{children:Object(r.jsx)(p,{type:"submit",className:d.a["submit-button"],children:"Create"})})})]})})})]})}function x(e){var t=Object(i.useRouter)(),n=Object(c.useState)({user:{},loggedIn:!1}),a=(n[0],n[1]);return Object(r.jsxs)(f,{className:"col-12 col-md-4 p-4 bg-light rounded-right",children:[Object(r.jsx)("h2",{children:"Log In"}),Object(r.jsx)("h3",{children:"See your recipes and grocery list!"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=new FormData(e.target);fetch("/api/userlogin",{method:"POST",body:n}).then((function(e){console.log(e),200===e.status?e.json().then((function(e){localStorage.setItem("user",JSON.stringify(e[0].user)),localStorage.setItem("loggedIn",!0),a({loggedIn:!0,user:e[0].user}),alert("Check out your favorite recipes ".concat(e[0].user.fname,"!")),t.back()})):alert("Login Failed. Phone number and/or password is incorrect.")}))},children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("label",{htmlFor:"phonein",children:"Phone Number:"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"tel",name:"phonein",id:"phonein",placeholder:"4158631292",maxLength:"10",autoComplete:"off"})]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("label",{htmlFor:"passwordin",children:"Password:"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"password",name:"passwordin",id:"passwordin",placeholder:"Your password"})]}),Object(r.jsx)("p",{children:Object(r.jsx)(p,{type:"submit",children:"Log In"})})]})]})}function m(){return Object(r.jsx)("section",{className:d.a["rachel-tile"],children:Object(r.jsx)(b,{className:"my-4 py-4 h-75 w-75",children:Object(r.jsxs)(h,{className:"w-100 h-75 pt-5 rounded",children:[Object(r.jsx)(O,{}),Object(r.jsx)(x,{})]})})})}function g(){return Object(r.jsxs)("div",{id:"page-container",children:[Object(r.jsx)(a.b,{}),Object(r.jsx)(a.c,{}),Object(r.jsx)(j.a,{children:Object(r.jsx)(m,{})}),Object(r.jsx)(a.a,{})]})}},O8tQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("nKUr"),c=n("q1tI"),i=n("VtrM"),a=n("YFqc"),s=n.n(a),o=n("dltQ"),l=n.n(o),d=n("vRNQ"),u=n.n(d),j=n("IP2g"),b=n("wHSu");function h(e){var t=Object(c.useState)(null),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("user");e&&i(JSON.parse(e))}),[]),null===n?Object(r.jsx)("p",{className:u.a.text_small,children:Object(r.jsx)("span",{children:Object(r.jsx)(s.a,{href:"/login",children:Object(r.jsx)("a",{children:"Log in to favorite this recipe!"})})})}):Object(r.jsx)(f,{userId:n.user_id,recipeId:e.recipeId})}function f(e){var t,n=Object(i.a)("/api/users/".concat(e.userId,"/recipes/").concat(e.recipeId),(function(e){return fetch(e).then((function(e){return e.json()}))})),c=n.data;return n.error?Object(r.jsx)("div",{children:"failed to load"}):void 0===c?Object(r.jsx)("div",{children:"loading..."}):(t=c,Object(r.jsx)(p,{favBool:t,userId:e.userId,recipeId:e.recipeId}))}function p(e){var t=Object(r.jsx)(j.a,{icon:b.c}),n=Object(r.jsx)(j.a,{icon:b.d}),i=Object(c.useState)(e.favBool),a=i[0],s=i[1];return Object(r.jsx)(l.a,{spy:a,children:Object(r.jsx)("button",{className:u.a["favorite-button"],onClick:function(){return t=e.recipeId,void s((function(n){return 1==n&&fetch("/api/users/".concat(e.userId,"/recipes/").concat(t,"/remove"),{method:"POST"}).then(console.log("I clicked unfavorite. This was a favorited recipe, but now it isnt!")),0==n&&fetch("/api/users/".concat(e.userId,"/recipes/").concat(t,"/add"),{method:"POST"}).then(console.log("I clicked favorite. This was not a favorited recipe. Now it is!")),!n}));var t},children:!0===a?t:n},e.recipeId)})}},dltQ:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(){return b||(b=(0,d.animation)(j))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.defaults,t=e.children,n=(e.out,e.timeout),i=e.duration,a=void 0===i?d.defaults.duration:i,s=e.delay,o=void 0===s?d.defaults.delay:s,u=e.count,j=void 0===u?d.defaults.count:u,b=e.forever,h=r(e,["children","out","timeout","duration","delay","count","forever"]),f={make:c,duration:void 0===n?a:n,delay:o,forever:b,count:j,style:{animationFillMode:"both"}};return(0,l.default)(h,f,!1,t,!0)}Object.defineProperty(t,"__esModule",{value:!0});var a,s=n("17x9"),o=n("eH+L"),l=(a=o)&&a.__esModule?a:{default:a},d=n("ar19"),u={duration:s.number,timeout:s.number,delay:s.number,count:s.number,forever:s.bool},j="\n  from {\n    transform: scale3d(1, 1, 1);\n  }\n\n  10%, 20% {\n    transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);\n  }\n\n  30%, 50%, 70%, 90% {\n    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);\n  }\n\n  40%, 60%, 80% {\n    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);\n  }\n\n  to {\n    transform: scale3d(1, 1, 1);\n}\n",b=!1;i.propTypes=u,t.default=i,e.exports=t.default},xcMo:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var r=n("nKUr"),c=(n("g4pe"),n("d5us")),i=n("O2ls"),a=n("O8tQ"),s=n("q1tI"),o=n("YFqc"),l=n.n(o),d=n("VtrM"),u=n("vRNQ"),j=n.n(u),b=n("7KBc"),h=n.n(b),f=n("IP2g"),p=n("wHSu");function O(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=Object(r.jsx)(f.a,{icon:p.b});function g(e){var t,n,c=e.directions.split("\n").map((function(e,t){return Object(r.jsx)("li",{children:e},t)}));!function(){var n=Object(d.a)("/api/".concat(e.recipe_id,"/tags"),(function(e){return fetch(e).then((function(e){return e.json()}))})),c=n.data;n.error||c&&(t=c.map((function(e,t){return Object(r.jsx)(l.a,{href:"/tags/".concat(e.tag_id),children:Object(r.jsxs)("a",{children:[e.name.toUpperCase()," "]})},t)})))}(),function(){var t=Object(d.a)("/api/".concat(e.recipe_id,"/ingredients"),(function(e){return fetch(e).then((function(e){return e.json()}))})),c=t.data;t.error||c&&(n=c.map((function(e,t){return Object(r.jsx)("li",{children:e.detailed_ingredient},t)})))}();var i={backgroundImage:"url(".concat(e.img,")"),backgroundRepeat:"no-repeat",backgroundSize:"550px"};return Object(r.jsx)(h.a,{right:!0,children:Object(r.jsx)("section",{className:j.a["flex-container-myrecipespage"],id:"".concat(e.recipe_id),children:Object(r.jsxs)("div",{className:j.a["my-recipe-flex"],style:i,children:[Object(r.jsxs)("div",{id:j.a["column-left"],children:[Object(r.jsx)(a.a,{recipeId:e.recipe_id}),Object(r.jsxs)("p",{className:j.a["card-recipe-title"],children:[Object(r.jsx)("span",{children:Object(r.jsx)(l.a,{href:"/recipes/".concat(e.recipe_id),children:Object(r.jsx)("a",{children:e.title})})}),Object(r.jsx)("br",{})]}),Object(r.jsx)("p",{className:j.a.text_small,children:Object(r.jsxs)("span",{children:["Tags: ",t]})})]}),Object(r.jsxs)("div",{id:j.a["column-middle"],children:[Object(r.jsx)("p",{children:Object(r.jsx)("span",{children:"Ingredients:"})}),Object(r.jsx)("div",{className:j.a.scrollable,children:Object(r.jsx)("ul",{className:j.a.text_small,children:n})})]}),Object(r.jsxs)("div",{id:j.a["column-right"],children:[Object(r.jsx)("p",{children:Object(r.jsx)("span",{children:"Directions:"})}),Object(r.jsx)("div",{className:j.a.scrollable,children:Object(r.jsx)("ol",{className:j.a.text_small,children:c})})]})]})})})}function v(e){var t,n=[],c=[],i=O(e.recipeData24);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(Object(r.jsx)(g,{recipe_id:a.recipe_id,title:a.title,directions:a.directions,ingredients:a.ingredients,img:a.img,tags:a.tags},a.recipe_id+a.title)),c.push(Object(r.jsx)(l.a,{href:"#".concat(a.recipe_id),class:"nav-link",children:Object(r.jsx)("a",{children:a.title})}))}}catch(s){i.e(s)}finally{i.f()}return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("main",{id:j.a.navbar,children:Object(r.jsxs)("center",{children:[Object(r.jsxs)("h3",{children:[m," My Recipes"]}),Object(r.jsxs)("p",{className:j.a.text_small,children:[" ",c.length>0?"Viewing your favorite recipes!":"Uh oh, you have no saved recipes! Try the search feature to find your favorite recipes!"]}),c]})}),Object(r.jsx)("div",{className:j.a["my-container"],children:n})]})}function y(){var e=Object(s.useState)(null),t=e[0],n=e[1];Object(s.useEffect)((function(){var e=localStorage.getItem("user");e&&n(JSON.parse(e))}),[]);var a=Object(d.a)("/api/users/".concat(t?t.user_id:2,"/recipes"),(function(e){return fetch(e).then((function(e){return e.json()}))})),o=a.data,l=a.error;if(l)return Object(r.jsx)("div",{children:"failed to load"});if(!o)return Object(r.jsx)("div",{children:"loading..."});var u=null;return l?u=Object(r.jsx)("div",{children:"failed to load"}):o||(u=Object(r.jsx)("div",{children:"loading..."})),null===t?Object(r.jsxs)("div",{id:"page-container",children:[Object(r.jsx)(c.b,{}),Object(r.jsx)(c.c,{}),Object(r.jsx)(h.a,{bottom:!0,children:Object(r.jsx)(i.SignInUpContainer,{})}),Object(r.jsx)(c.a,{})]}):Object(r.jsxs)("div",{id:"page-container",children:[Object(r.jsx)(c.b,{}),Object(r.jsx)(c.c,{}),u||Object(r.jsx)(v,{recipeData24:o}),Object(r.jsx)(c.a,{})]})}}},[["F3j7",2,1,5,3,4,6,9]]]);